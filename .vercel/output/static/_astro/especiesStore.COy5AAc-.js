import{w as c}from"./index.Bj88MMzq.js";import{s}from"./supabase.CIJy6KaJ.js";import"./equality.Dp7T0ObN.js";const p=c([]);async function u(r){try{const{data:e,error:o}=await s.from("products").select("id").eq("especieid",r);if(o)throw o;if(e&&e.length>0)throw new Error(`No se puede eliminar la especie porque tiene ${e.length} productos asociados`);const{error:t}=await s.from("especies").delete().eq("id",r);if(t)throw t;return p.update(i=>i.filter(a=>a.id!==r)),!0}catch(e){throw console.error(`Error al eliminar especie ${r}:`,e),e}}export{u as deleteEspecie,p as especiesStore};

import{i as e}from"./authStore.oNKChDb7.js";import"./index.Bj88MMzq.js";import"./equality.Dp7T0ObN.js";import"./supabase.CIJy6KaJ.js";const s=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",o="jamuchee_admin_auth",t="session_checked";let a=!1;async function i(){if(!a){a=!0;try{if(s){console.log("Modo desarrollo: Activando autenticación automática"),e.set(!0),localStorage.setItem("devModeAuth","true"),localStorage.setItem(o,"true"),sessionStorage.setItem(t,"true");return}if(sessionStorage.getItem(t)==="true"){const n=localStorage.getItem(o)==="true";console.log("Sesión ya verificada:",n?"Autenticado":"No autenticado"),e.set(n),!n&&!window.location.pathname.endsWith("/admin")&&(console.log("No autenticado, redirigiendo a login"),window.location.href="/admin");return}if(sessionStorage.setItem(t,"true"),localStorage.getItem(o)==="true"){console.log("Token local encontrado, considerando autenticado"),e.set(!0);return}window.location.pathname.endsWith("/admin")||(console.log("No autenticado y no en página de login, redirigiendo"),window.location.href="/admin")}finally{a=!1}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i();document.getElementById("logout-btn")?.addEventListener("click",()=>{console.log("Cerrando sesión..."),localStorage.removeItem("devModeAuth"),localStorage.removeItem(o),localStorage.removeItem("authStatus"),sessionStorage.removeItem(t),e.set(!1),window.location.href="/admin"});

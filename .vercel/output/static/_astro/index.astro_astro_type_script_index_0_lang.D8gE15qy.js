import{d as E}from"./productStore.C_VWqYAd.js";import"./index.Bj88MMzq.js";import"./equality.Dp7T0ObN.js";import"./supabase.CIJy6KaJ.js";import"./client.schema.D9gTZs88.js";function f(e,a="success"){const d=document.getElementById("notifications");if(!d)return;const o=document.createElement("div");o.className=`p-4 rounded-md shadow-lg transform transition-all duration-500 ease-in-out ${a==="success"?"bg-green-100 text-green-800 border-l-4 border-green-500":"bg-red-100 text-red-800 border-l-4 border-red-500"}`,o.textContent=e,d.appendChild(o),setTimeout(()=>{o.classList.add("opacity-0","translate-x-full"),setTimeout(()=>{o.remove()},500)},5e3)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("delete-modal"),a=document.getElementById("confirm-delete"),d=document.getElementById("cancel-delete"),o=document.querySelectorAll(".delete-product"),s=document.getElementById("search-input"),i=document.getElementById("category-filter"),l=document.getElementById("status-filter"),g=document.getElementById("products-table");let n=null;o.forEach(t=>{t.addEventListener("click",()=>{n=t.getAttribute("data-id"),e&&e.classList.remove("hidden")})}),d&&d.addEventListener("click",()=>{e&&e.classList.add("hidden"),n=null}),a&&a.addEventListener("click",async()=>{if(n){try{await E(n),e&&e.classList.add("hidden"),f("Producto eliminado correctamente","success");const t=document.querySelector(`tr[data-id="${n}"]`);t&&t.remove();const c=g?.querySelector("tbody");c&&c.children.length===0&&setTimeout(()=>{window.location.reload()},1e3)}catch(t){f(t instanceof Error?`Error: ${t.message}`:"Error al eliminar el producto","error")}n=null}});function u(){const t=s?.value.toLowerCase(),c=i?.value,m=l?.value;document.querySelectorAll("tbody tr").forEach(r=>{const y=r.getAttribute("data-name")||"",h=r.getAttribute("data-category")||"",p=r.getAttribute("data-status")||"";(!t||y.includes(t))&&(!c||h===c)&&(!m||p===m)?r.classList.remove("hidden"):r.classList.add("hidden")})}s&&s.addEventListener("input",u),i&&i.addEventListener("change",u),l&&l.addEventListener("change",u)});

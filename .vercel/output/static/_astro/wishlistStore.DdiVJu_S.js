import{a as c}from"./client.schema.D9gTZs88.js";import{m as u,a as d}from"./index.9eZ28vGx.js";const i=u({}),f=d(0),r=d(null),l="jamuche-wishlist";function g(t){try{const e=c(t);return i.setKey(e.id,{id:e.id,name:e.name,price:e.price,discountprice:e.discountprice||0,image:e.image,category:e.category||"",description:e.description||""}),o(),r.set(null),!0}catch(e){return console.error("Error al añadir a la lista de deseos:",e),r.set(e.message||"Error al añadir a la lista de deseos"),!1}}function w(t){try{return i.setKey(t,void 0),o(),r.set(null),!0}catch(e){return console.error("Error al eliminar de la lista de deseos:",e),r.set(e.message||"Error al eliminar de la lista de deseos"),!1}}function y(t){return!!i.get()[t]}function o(){const t=i.get(),e=Object.keys(t).filter(s=>t[s]!==void 0).length;f.set(e)}function m(){if(!(typeof window>"u"))try{const t=localStorage.getItem(l);if(t){const e=JSON.parse(t);e&&typeof e=="object"&&(Object.entries(e).forEach(([s,n])=>{if(n)try{const a=c(n);i.setKey(s,a)}catch(a){console.warn(`Item inválido en wishlist guardado (ID: ${s}):`,a)}}),o())}i.listen(e=>{typeof window<"u"&&localStorage.setItem(l,JSON.stringify(e))})}catch(t){console.error("Error al inicializar wishlist:",t),i.set({}),o()}}typeof window<"u"&&m();export{g as a,f as b,y as i,w as r,i as w};

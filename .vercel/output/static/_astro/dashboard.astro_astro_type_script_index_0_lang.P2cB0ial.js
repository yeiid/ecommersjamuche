import{i}from"./authStore.oNKChDb7.js";import{s}from"./supabase.CIJy6KaJ.js";import"./index.Bj88MMzq.js";import"./equality.Dp7T0ObN.js";if(typeof window<"u"){localStorage.getItem("devModeAuth");{const t=sessionStorage.getItem("dashboard_redirection_attempted");let e=!1;i.subscribe(o=>{e=o,console.log("Dashboard - Estado de autenticación según store:",e)}),!e&&!t?(console.log("Dashboard - No autenticado, intentando verificar con Supabase antes de redirigir"),s.auth.getSession().then(({data:o})=>{const a=!!o.session;console.log("Dashboard - Sesión de Supabase:",a?"Activa":"Inactiva"),a||(console.log("Dashboard - Confirmado no autenticado, redirigiendo"),sessionStorage.setItem("dashboard_redirection_attempted","true"),window.location.href="/admin")})):t&&(console.log("Dashboard - Ya se intentó redireccionar, evitando bucle"),setTimeout(()=>{sessionStorage.removeItem("dashboard_redirection_attempted")},5e3))}}
